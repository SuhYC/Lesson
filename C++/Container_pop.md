# STL Container는 pop을 호출할 때 객체를 어떻게 처리할까?

기존에 원시포인터가 더 편했기에 코드를 원시포인터로 작성한 경우가 많았는데 <br/>
이번에 스마트포인터로 교체하는게 낫겠다는 생각이 들어 코드를 수정하고 있었다. <br/>
그런데 문득 드는 생각이
### 원시 포인터는 자료구조에서 빼는 동작과 해제하는 동작을 호출해야하잖아. 그럼 스마트포인터는?
일단 일반포인터의 큐를 생각해보자.

    std::queue<int*> q;
    delete q.front(); // 결국 포인터는 주소고 해제는 수동으로 해야하니 해제를 먼저하고
    q.pop(); // 그 다음에 주소를 버리는게 맞잖아

스마트포인터는?<br/>
일단 RAII의 원리를 적용한 객체잖아.

## Container에 들어있는 "객체"는 pop을 호출하면 소멸자가 호출된다.
포인터 그 자체는 사실 소멸자가 없다 (포인터가 가리키고 있는 주소에 해당하는 메모리를 회수하며 포인터에 타입에 따라 소멸자를 호출할 수는 있다.) <br/>
객체는 소멸자를 정의하고 소멸 시에 호출할 수 있다. <br/>
queue에 들어있던 객체는 pop을 호출하면 소멸자도 호출된다. (pop은 리턴타입 없이 데이터를 빼서 버리는 용이니까..) <br/>
스마트포인터가 소멸자가 호출되면 어떻게 될까? <br/>
레퍼런트 카운트가 아직 남아있다면 모르겠지만 레퍼런트 카운터가 마지막이라면 스마트포인터가 가리키던 주소에 해당하는 동적메모리를 회수한다!
