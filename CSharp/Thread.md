# 스레드
운영체제가 CPU 시간을 할당하는 기본 단위. <br/>
프로세스는 하나 이상의 스레드로 구성된다.

## 장점
1. 응답성을 높일 수 있다.
 - 단일스레드로 시간이 오래걸리는 작업을 수행중이라면, 다른 동작을 요청할 수 없다.
 - 멀티스레드로 동작한다면, 시간이 오래걸리는 작업을 수행하더라도 다른 요청에 응답할 수 있다.
2. 멀티프로세스에 비해 자원 공유가 쉽다
 - 멀티프로세스는 프로세스끼리 자원을 공유하려면 IPC(```Inter Process Communication```)을 사용하거나 소켓을 이용해야한다.
 - 멀티스레드는 코드 내 변수를 같이 사용하는 것 만으로도 데이터를 교환할 수 있다.
3. 경제적이다.
 - 프로세스의 자원을 그대로 사용하므로 메모리와 자원을 할당하는 비용을 지불하지 않아도 된다.

## 단점
1. 구현이 복잡하다.
 - 동기화도 고려해야하며 디버깅도 어렵다.
2. 소프트웨어 안정성을 악화시킨다.
 - 멀티프로세스의 자식프로세스는 문제가 생겨도 부모프로세스에 영향을 주지 않는다.
 - 멀티스레드의 스레드는 문제가 생기면 프로세스에 영향을 줄 수 있다.
3. 과용하면 성능이 저하된다.
 - 스레드를 전환하는데 문맥전환비용이 발생한다.
 - 과도하게 많은 스레드는 오히려 문맥전환비용이 커져 성능이 저하된다.


## 사용
```System.Threading.Thread```를 사용하여 ```Thread```인스턴스를 만들고 ```Start()```메소드로 시작하고 ```Join()```메소드로 종료대기한다.
```cs
static void DoSomething()
{
  Console.WriteLine("DoSomething");
}

Thread t1 = new Thread(new ThreadStart(DoSomething));
t1.Start();
t1.Join();
```

## 임의종료
```Thread.Abort()```메소드로 ```ThreadAbortException```을 던져 스레드를 종료시킬 수 있다. <br/>
이 경우 catch문을 통해 예외를 처리할 수 있고, finally블록까지 수행한 후 스레드는 완전 종료된다. <br/>

다만 현재는 ```Abort()```는 권장하지 않는다. <br/>

```Thread.Interrupt()```메소드로 ```ThreadInterruptedException```을 던져 스레드를 종료시킬 수 있다. <br/>
```Abort```와 다른 점은 스레드가 ```WaitSleepJoin```상태일 경우에만 종료시키며, 해당 상태가 아닌 경우 해당 상태에 진입할 때 종료시킨다. <br/>
다만 ```ThreadInterruptedException```은 try-catch를 통해 처리되면 스레드가 종료되지 않고 스레드가 깨어난다.

## Thread.ThreadState
스레드의 상태를 ```Flag```열거형으로 표현한다. <br/>
1. ```Running```           : 0  ( 000000000 )
2. ```StopRequested```     : 1  ( 000000001 )
3. ```SuspendRequested```  : 2  ( 000000010 )
4. ```Background```        : 4  ( 000000100 )
5. ```Unstarted```         : 8  ( 000001000 )
6. ```Stopped```           : 16 ( 000010000 )
7. ```WaitSleepJoin```     : 32 ( 000100000 )
8. ```Suspended```         : 64 ( 001000000 )
9. ```AbortRequested```    : 128( 010000000 )
10. ```Aborted```          : 256( 100000000 )
